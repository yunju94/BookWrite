<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout1}">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}">
    <script th:inline="javascript">
        $(document).ready(function() {

           view();

   });

   function view() {
       var id = $('#id').val();  // 'id' 값을 가져옵니다.

       var token = $("meta[name='_csrf']").attr("content");  // CSRF 토큰을 가져옵니다.
       var header = $("meta[name='_csrf_header']").attr("content");  // CSRF 헤더 이름을 가져옵니다.

       var url = '/Novel/viewCount/' + id;  // 요청할 URL을 구성합니다.


       $.ajax({
           url: url,
           type: "POST",
           contentType: "application/json",
           beforeSend: function(xhr) {
               xhr.setRequestHeader(header, token);  // CSRF 토큰을 요청 헤더에 추가합니다.
           },
           dataType: "json",
           cache: false,
           success: function(result) {


           },
           error: function(jqXHR) {
               if (jqXHR.status == 401) {
                   alert('로그인 후 이용해주세요');
                   location.href = '/members/login';  // 로그인 페이지로 리다이렉트합니다.
               } else {
                   alert(jqXHR.responseText);  // 에러 메시지를 표시합니다.
               }
           }
       });
   }
    </script>

    <style>

    </style>

</head>

<body>
<div layout:fragment="content">
    <h3 th:text="${writeInfo.title}" class="title"></h3>
    <input type="hidden" th:value="${writeDetail.viewCount}" id="viewCount">
    <input type="hidden" th:value="${writeDetail.id}" id="id">
    <a th:text="${writeDetail.miniTitle}"></a>
    <a th:text="${writeDetail.miniWrite}" readonly></a>




</div>
</body>


</html>